import hljs from "highlight.js";
import {$var} from "./store";
import {nextTick} from "vue";

let rootLanguages = hljs.listLanguages();
rootLanguages.push("vue","html")
rootLanguages = rootLanguages.sort()
const languages = rootLanguages.map(v=>{
    if(v === "plaintext"){
        return {
            label: "plaintext - çº¯æ–‡æœ¬",
            value: "plaintext"
        }
    }else if(v === "markdown"){
        return {
            label: "markdown - å¯æ¸²æŸ“æ˜¾ç¤ºâœ¨",
            value: "markdown"
        }
    }
    return {
        label:v,
        value:v
    }
});


const isSupportedLanguage = (languageName)=>{
    if(languageName==null){
        return false;
    }
    return rootLanguages.includes(languageName)
}




const handleRecoverLiteShow = ()=>{
    if($var.view.recoverLiteShow){
        $var.view.recoverLiteShow= false;
        $var.view.fullScreenShow = false;
        utools.setExpendHeight($var.view.recoverLiteHeight)
    }
}

const refreshListView = ()=>{
    $var.view.refresh = false;
    nextTick(()=>{
        $var.view.refresh = true
    })
}
export const backupFilePath = utools.getPath('home')+(utools.isWindows()? "\\":'/') +'code-snippet-backup.md';

export const defaultHelpSnippet = {
    name: 'ğŸ‰CodeSnippetæ’ä»¶å…¥é—¨æ‰‹å†Œ&æ–°åŠŸèƒ½ä»‹ç»ğŸ‰',
    desc: 'å³é”®è¯¥å…ƒç´ é€‰æ‹©é¢„è§ˆä»£ç ï¼Œæ‡‚çš„äººå·²ç»ç”¨væ‰“å¼€äº†',
    type: 'markdown',
    code: `# å…¥é—¨æ‰‹å†Œ

> ä¸ºäº†æ›´å¥½åœ°é¢„è§ˆï¼Œè¯·ç‚¹å‡»ä¸‹é¢çš„\`æœªæ¸²æŸ“\`åˆ‡æ¢æˆ\`å·²æ¸²æŸ“\`ï¼Œåˆæˆ–è€…\`Vim\`æ¨¡å¼ä¸‹æŒ‰ä¸‹\`R\`é”®

> æƒ³è¦ç§»é™¤è¯¥æ–‡æ¡£ï¼Œå¯ä»¥è¿›è¡Œåˆ é™¤æ“ä½œï¼Œåç»­è¯·é€šè¿‡è®¾ç½®ç•Œé¢\`å…³é—­æ˜¾ç¤ºå…¥é—¨æ‰‹å†Œ\`æ¢å¤å³å¯


## 1.æ–°ç‰ˆæœ¬åŠŸèƒ½
> æ–°æ‰‹è¯·å…ˆé˜…è¯»ä¸‹ä¸€ç« èŠ‚

1. æ”¯æŒMarkdownæ–‡ä»¶ç±»å‹è¿›è¡Œæ¸²æŸ“æ˜¾ç¤ºï¼Œæ”¯æŒçš„æ–‡ä»¶ç±»å‹ä¸º\`markdown\`å’Œ\`md\`
   - Vimæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹\`R\`é”®ï¼ˆrenderï¼‰è¿›è¡Œæ¸²æŸ“åˆ‡æ¢

2. æ”¯æŒæœ¬åœ°å…³è”æ–‡ä»¶å’Œç½‘ç»œæ–‡ä»¶ï¼Œè¯·å»\`æ·»åŠ /ä¿®æ”¹ ä»£ç ç‰‡æ®µ\`ç•Œé¢é€‰æ‹©\`é“¾æ¥æ–‡ä»¶\`ä½“éªŒ

   - Vimæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹\`B\`é”®ï¼ˆbufferï¼‰å¯ä»¥ç¼“å­˜æ•°æ®ï¼Œåç»­ç›´æ¥è®¿é—®ç¼“å­˜æ•°æ®

   > è¿™é‡Œæ›´å‡†ç¡®çš„åº”è¯¥æ˜¯\`C\`(cache)ï¼Œä¸è¿‡\`C\`é”®å·²æœ‰ç›¸åº”åŠŸèƒ½ï¼Œæ•…é€‰æ‹©\`B\`é”®

3. æ”¯æŒå­ä»£ç ç‰‡æ®µ

   > è¿™é‡Œè¯·å…ˆæŒ‰\`R\`é”®é€€å‡ºæ¸²æŸ“æ¨¡å¼ï¼Œå¯ä»¥å‘ç°ä¸€äº›è¡Œè¢«é«˜äº®è¦†ç›–ï¼Œå³å­ä»£ç ç‰‡æ®µ

   - ç‚¹å‡»è¡Œå·å¯ä»¥æ·»åŠ /å–æ¶ˆé«˜äº®è¡Œè¦†ç›–ï¼Œå·¦é”®æ˜¯å•è¡Œæ“ä½œï¼Œè€Œå³é”®æ˜¯èŒƒå›´æ“ä½œ
   - ä»…æ”¯æŒ\`1-9\`ä¸ªå­ä»£ç ç‰‡æ®µï¼Œå…¶ä»–å­ä»£ç ç‰‡æ®µè™½å­˜åœ¨ä½†æ— æ³•å¦‚ä¸‹é¢ä½¿ç”¨
   - å­ä»£ç ç‰‡æ®µçš„ä½¿ç”¨ä»…é™äº\`Vim\`æ¨¡å¼åœºæ™¯
     - \`1-9\`é”®ï¼šå¤åˆ¶å¯¹åº”å­ä»£ç ç‰‡æ®µ
     - \`shift/alt/ctrl/command\`+\`1-9\`é”®ï¼šç²˜è´´å¯¹åº”å­ä»£ç ç‰‡æ®µ

   > å¦‚æœå­ä»£ç ç‰‡æ®µè¿‡å¤šä¸å¥½æ¸…ç†ï¼Œè¯·å¿«é€Ÿç‚¹å‡» ä»£ç é¢„è§ˆç•Œé¢çš„\`Vim\`æŒ‰é’®\`3\`æ¬¡ï¼Œå³å¯æ¸…é™¤æ‰€æœ‰å­ä»£ç ç‰‡æ®µ

4. æ”¯æŒå†…ç½®å˜é‡å’Œè¡¨è¾¾å¼è§£æ

> å½“å‰åŠŸèƒ½ä»…é€‚ç”¨äº\`x-\`å¼€å¤´ç±»å‹çš„ä»£ç ç‰‡æ®µï¼Œä¾‹å¦‚\`x-markdown\`ç­‰

\`\`\`javascript
// æ”¯æŒå†…ç½®å˜é‡è§£æï¼šå…³äºå†…ç½®å˜é‡ï¼Œå¯ä»¥å» è®¾ç½®>æ ‡ç­¾ä¸å˜é‡ ä¸­é…ç½®
#{rand10m}#  // #{...}#

// æ”¯æŒè¡¨è¾¾å¼è§£æï¼Œå†…éƒ¨å¿…é¡»ä»¥@å¼€å¤´
#{@Date.now()}#  // #{@...}#  ä¸æ”¯æŒå†…ç½®å˜é‡è§£æ,ä½†æ˜¯å¯ä»¥é€šè¿‡$å†…ç½®å˜é‡æ¥è·å–ï¼Œä¾‹å¦‚$.random

// å…¶ä¸­å†…ç½®å˜é‡è‹¥è¢«æ›¿æ¢ä¸ºä»¥@å¼€å¤´çš„è¡¨è¾¾å¼ï¼Œå¯ä»¥ç»§ç»­è¡¨è¾¾å¼è§£æ
#{exp}#  // expå˜é‡è¢«é…ç½®ä¸º @Date.now()ï¼Œåç»­è¿›è¡Œ #{@Date.now()}è¡¨è¾¾å¼è§£æ
\`\`\`

5. åŸæœ‰ä¸‰ä¸ªå†…ç½®æ ‡ç­¾ï¼ˆæ—¶é—´ã€ç±»å‹å’Œä½¿ç”¨æ¬¡æ•°ï¼‰è¢«ç§»é™¤ï¼Œè½¬ä¸ºå…ƒç´ å³ä¸‹è§’å°å­—æ˜¾ç¤º
6. æ›´æ”¹ã€å¿«æ·æ–¹å¼ã€‘æ˜¾ç¤ºï¼Œè¯·åœ¨\`Vim\`æ¨¡å¼ä¸‹æŒ‰\`Z\`é”®æŸ¥çœ‹ï¼Œæ»šåŠ¨æ¡ä¹Ÿå¯ä»¥è¢«æ§åˆ¶
7. æ–°å¢ã€å…ƒç´ ä»£ç å—ã€‘ä¸æ˜¾ç¤ºçš„æ•ˆæœï¼Œè¯·åœ¨ ä¸ªæ€§åŒ–å®šåˆ¶ ä½“éªŒ
8. é€‚é…uTools4.0èšåˆæ¨¡å¼ï¼Œæä¾›å¿«é€Ÿæœç´¢ä»£ç ç‰‡æ®µå¹¶ç²˜è´´ä½¿ç”¨åŠŸèƒ½





## 2.æ–°æ‰‹å…¥é—¨

> åœ¨è¿™é‡Œå¾ˆæ„Ÿè°¢æ‚¨çš„ä½¿ç”¨ï¼Œç”±äºè‡ªå·±åœ¨å‰ç«¯æ–¹é¢ä»æ˜¯ä¸€ä¸ªå°ç™½ï¼Œæ’ä»¶å¯èƒ½ä¼šå‡ºç°ä¸€äº›æœªçŸ¥é—®é¢˜ï¼Œè‹¥æ‚¨é‡åˆ°äº†ï¼Œå¸Œæœ›èƒ½å¤Ÿåé¦ˆ

- å…³äºæœ¬æ’ä»¶

æœ¬æ’ä»¶æ˜¯ä¸€ä¸ªç®¡ç†ä»£ç ç‰‡æ®µçš„utoolsæ’ä»¶åº”ç”¨ï¼Œä¸ºäº†é¿å…ä¸€äº›ä½æ•ˆçš„é¼ æ ‡æ“ä½œï¼Œæœ¬æ’ä»¶æ›´åå‘äº\`Vim\`æ¨¡å¼æ“ä½œã€‚

> æŒ‰ä¸‹\`Tab\`é”®å¯ä»¥å¼€å¯/å…³é—­\`Vim\`æ¨¡å¼ï¼Œåœ¨å®Œæ•´UIæ¨¡å¼ä¸‹å¯ä»¥å‘ç°å·¦ä¸‹è§’æœ‰ä¸€ä¸ª\`Vim\`æ¨¡å¼æ˜¾ç¤ºå—

> æœ¬æ’ä»¶æ›´åå‘äº\`Vim\`é”®ç›˜æ“ä½œæ–¹å¼ï¼Œç›¸å¯¹äºé¼ æ ‡æ“ä½œå¯èƒ½ä¸å¤ªå‹å¥½ï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©å®˜æ–¹çš„\`å¤‡å¿˜å¿«è´´\`æ’ä»¶åº”ç”¨ï¼Œæ²¡å¿…è¦ä¸€æ£µæ ‘åŠæ­»

> æ–°ç‰ˆæœ¬åŠŸèƒ½ï¼šæŸ¥çœ‹Vimæ¨¡å¼çš„æŒ‰é”®åŠŸèƒ½ï¼Œè¯·åœ¨\`Vim\`æ¨¡å¼ä¸‹æŒ‰ä¸‹\`Z\`é”®æŸ¥çœ‹

- UIæ¨¡å¼åˆ‡æ¢

æœ¬æ’ä»¶æ”¯æŒä¸‹é¢ä¸¤ç§UIæ¨¡å¼ï¼Œå¯ä»¥å¿«é€ŸåŒå‡»\`Tab\`é”®è¿›è¡Œåˆ‡æ¢\t

1. å®Œæ•´UIæ¨¡å¼ï¼šé«˜åº¦å§‹ç»ˆä¸å˜
2. åˆ—è¡¨UIæ¨¡å¼ï¼šä¸»ç•Œé¢éšå…ƒç´ æ•°é‡è€Œæ”¹å˜

> å¯ä»¥åœ¨è®¾ç½®ç•Œé¢ä¸­é…ç½® é»˜è®¤UIæ¨¡å¼
- æŸ¥è¯¢ä»£ç ç‰‡æ®µ
åœ¨utoolsçš„å­è¾“å…¥æ¡†è¿›è¡Œè¾“å…¥
\`\`\`js
[name] [#tag] [@type]
// [...]è¡¨ç¤ºå¯é€‰éƒ¨åˆ†
// name: ä»£ç ç‰‡æ®µåï¼ˆæ¨¡ç³ŠåŒ¹é…ï¼‰
// tag: æ ‡ç­¾ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ª
// type: ä»£ç ç‰‡æ®µç±»å‹
\`\`\`
> ä¸Šé¢çš„æŸ¥è¯¢ä¸­ä¸‰ä¸ªéƒ¨åˆ†éƒ½æ˜¯å¯é€‰çš„ï¼Œè¦ä»¥ç©ºæ ¼é—´éš”ï¼Œå¹¶ä¸é™åˆ¶é¡ºåº`,
    help: true,
    sections: [
        [20,31]
    ]
}

export {
    languages,
    isSupportedLanguage,handleRecoverLiteShow,refreshListView
}