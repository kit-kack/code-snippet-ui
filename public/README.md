# 入门手册

[[TOC]]

> 为了更好地预览，请点击下面的`未渲染`切换成`已渲染`，又或者`Vim`模式下按下`R`键

> 想要移除该文档，可以进行删除操作，后续可以通过设置界面`关闭显示入门手册`恢复即可



## 1.新手入门

### 1.关于本插件

本插件是一个管理代码片段的uTools插件应用，为了避免一些低效的鼠标操作，本插件更偏向于`Vim`模式操作。

> 按下`Tab`键可以开启/关闭`Vim`模式，在完整UI模式下可以发现左下角有一个`Vim`模式显示块；
>
> 同时，按下`Tab`键也会控制uTools子输入框失聚焦
>
> 要查看Vim模式的按键功能，请在`Vim`模式下按下`Z`键查看

> 提示：由于本插件更偏向于`Vim`键盘操作方式，相对于鼠标操作可能不太友好，你也可以选择官方的`备忘快贴`插件应用，没必要在一棵树上吊死



### 2.UI模式切换

本插件支持下面两种UI模式，可以快速双击`Tab`键进行切换

1. 完整UI模式：高度始终不变
2. 列表UI模式：主界面随元素数量而改变

> 可以在设置界面中配置`默认UI模式`
> 注意：列表UI模式显示并不稳定，如果想要稳定的效果可以将本插件设置为`退出至后台立即结束运行`


### 3.查询代码片段

在uTools的子输入框进行输入

```js
[name] [#tag] [@type]
// [...]表示可选部分
// name: 代码片段名（模糊匹配）
// tag: 标签，可以指定多个
// type: 代码片段类型
```

> 上面的查询中三个部分都是可选的，要以空格间隔，但并不限制前后顺序

> 本插件适配uTools4.0聚合模式，提供uTools主输入框直接搜索代码代码并粘贴的功能，但需要在uTools设置界面中开启本插件的`允许推送`能力



## 2.其他功能

### 1.Markdown渲染

> 正如你现在所见内容，本插件支持对语言类型为`markdown`的代码片段进行渲染显示

- Vim模式下，按下`R`键（render）进行渲染切换



### 2.链接文件

> 链接文件是指`本地关联文件`或`网络文件`，可以在`添加/修改 代码片段`界面选择`链接文件`体验

- Vim模式下，按下`B`键（buffer）可以缓存数据，后续直接访问缓存数据

> 这里更准确的应该是`C`(cache)，不过`C`键已有相应功能，故选择`B`键
 - 新增Vim模式`O`(open)键，可以快速进行系统应用打开 
> 对于本地关联文件，可以结合`Shift`键来快速在系统文件管理器中打开显示



### 3.子代码片段

> 这里请先按`R`键退出渲染模式，可以发现一些行被高亮覆盖，即子代码片段

 - 点击行号可以添加/取消高亮行覆盖，左键是单行操作，而右键是范围操作
 - 仅支持`1-9`个子代码片段，其他子代码片段虽存在但无法如下面使用
 - 子代码片段的使用仅限于`Vim`模式场景
     - `1-9`键：复制对应子代码片段
     - `shift/alt/ctrl/command`+`1-9`键：粘贴对应子代码片段

> 如果子代码片段过多不好清理，请快速点击 左下角的`Vim`按钮`3`次，即可清除所有子代码片段



### 4.内置变量和表达式解析

> 当前功能仅适用于语言类型为`x-`开头的代码片段，例如`x-markdown`

```js
// 支持内置变量替换：关于内置变量，可以去 设置>标签与变量 中配置
#{random}#  // #{...}#

// 支持Javascript表达式解析，内部必须以@开头
#{@Date.now()}#  // #{@...}#  不支持内置变量替换,但是可以通过 $内置变量 来获取，例如 $.random

// 其中内置变量若被替换为以@或#开头的表达式，可以继续表达式解析
#{exp}#  // exp变量被配置为 @Date.now()，后续进行 #{@Date.now()}# 表达式解析
```
> 补充说明：配置内置变量时，可以将变量配置为`#{input:default}#`，从而在每次粘贴复制时会触发用户主动输入变量值，其中`default`表示默认值，可以进行省略

- 关于内置变量值 `#`和`@`开头的区别

> 如果你是从`v2.3.0`版本过渡而来，请重置或移除原有的默认内置变量

```js
// 示例：变量one为#Date.now()，变量two为@Date.now()

// #: 表达式变量，会立即进行解析，后续访问该变量会访问其解析后的值
#{one}#    // -> 100     
#{@$.one}# // -> 100  

// @: 其实只是以@开头的字符串而已，单纯字符串替换，碰巧满足最后的字面表达式解析要求
#{two}#    // -> 101
#{@$.two}# // -> @Date.now()
```



## 3.不重要的更新日志

- 原有的`模糊符号匹配`改进为`进阶模糊匹配`
- `本地关联文件`被选取后会自动识别后缀名作为代码片段类型
- 编辑界面代码语言类型选择：支持一些编程语言类型简写 选择补全
- 输入变量界面重新实现，弥补之前的不能粘贴问题





## 4.最后

本人在前端方面只是一个小白，所以开发的插件可能会出现一些未知问题，若你遇到了，欢迎评论区反馈

> 插件所用技术概述：
>
> - uTools插件构建：[vite-plugin-utools-helper](https://github.com/csj8520/vite-plugin-utools-helper)
> - UI组件库：[Naive UI](https://www.naiveui.com/zh-CN/light)
> - 语言高亮：[highlight.js](https://highlightjs.org/)
> - Markdown渲染：[v-md-editor](http://ckang1229.gitee.io/vue-markdown-editor/zh/quick-start.html)
> - 唯一ID生成：[Nano ID](https://github.com/ai/nanoid)

