# 入门手册

[[TOC]]



> 为了更好地预览，请点击下面的`未渲染`切换成`已渲染`，又或者`Vim`模式下按下`R`键

> 想要移除该文档，可以进行删除操作，后续可以通过设置界面`关闭显示入门手册`恢复即可

> 提示：若目录中有✨符号，表示其内容有新增或修改

<br/>

## 1.新手入门

### 1.1 关于本插件

本插件是一个管理代码片段的uTools插件应用，为了避免一些低效的鼠标操作，本插件更偏向于`Vim`模式操作。

> 按下`Tab`键可以开启/关闭`Vim`模式，在完整UI模式下可以发现左下角有一个`Vim`模式显示块；
>
> 同时，按下`Tab`键也会控制uTools子输入框失聚焦
>
> 要查看Vim模式的按键功能，请在`Vim`模式下按下`Z`键查看

> 提示：由于本插件更偏向于`Vim`键盘操作方式，相对于鼠标操作可能不太友好，如果有介意的话，建议选择官方的`备忘快贴`插件使用

<br/>

### 1.2 UI模式切换

本插件支持下面两种UI模式，可以快速双击`Tab`键进行切换

1. 完整UI模式：高度始终不变
2. 列表UI模式：主界面随元素数量而改变

> 可以在设置界面中配置`默认UI模式`

<br/>

### 1.3 查询代码片段✨

在uTools的子输入框进行输入

```js
[name] [#tag] [@type]
// [...]表示可选部分
// name: 代码片段名（模糊匹配）
// tag: 标签，可以指定多个
// type: 代码片段类型
```

> 上面的查询中三个部分都是可选的，要以空格间隔，但并不限制前后顺序

> ✨新增【辅助标签选择】：在设置中开启，后续输入#时，可以进行标签可视化选择

> 本插件适配uTools4.0聚合模式，提供uTools主输入框直接搜索代码代码并粘贴的功能，但需要在uTools设置界面中开启本插件的`允许推送`能力

<br/>

## 2.高级功能

### 2.1 Markdown渲染

> 正如你现在所见内容，本插件支持对语言类型为`markdown`的代码片段进行渲染显示

- Vim模式下，按下`R`键（render）进行渲染切换

<br/>

### 2.2 链接文件

> 链接文件是指`本地关联文件`或`网络文件`，可以在`添加/修改 代码片段`界面选择`链接文件`体验

- Vim模式下，按下`B`键（buffer）可以缓存数据，后续直接访问缓存数据

> 这里更准确的应该是`C`(cache)，不过`C`键已有相应功能，故选择`B`键
 - 按下Vim模式`O`(open)键，可以快速进行系统应用打开 
> 对于本地关联文件，可以结合`Shift`键来快速在系统文件管理器中打开显示

<br/>

### 2.3 子代码片段

> 这里请先按`R`键退出渲染模式，可以发现一些行被高亮覆盖，即子代码片段

 - 点击行号可以添加/取消高亮行覆盖，左键是单行操作，而右键是范围操作
 - 仅支持`1-9`个子代码片段，其他子代码片段虽存在但无法如下面使用
 - 子代码片段的使用仅限于`Vim`模式场景
     - `1-9`键：复制对应子代码片段
     - `shift/alt/ctrl/command`+`1-9`键：粘贴对应子代码片段

> 如果子代码片段过多不好清理，请快速点击 左下角的`Vim`按钮`3`次，即可清除所有子代码片段

<br/>

### 2.4 占位符解析✨

> <span style="color:red">🚨重构说明：【变量与表达式解析】已重构为【占位符解析】功能，旧版本规则不再适用！！！</span>

> 想要开启该功能，需要在代码片段的语言类型加上`x-`前缀，例如`markdown`变成`x-markdown`

- 基本使用

```js
// 基本使用
hello, {{clipboard}}  // 使用{{...}}来使用占位符
// 一些占位符支持携带参数使用
{{random}} // 默认产生 [0,1)之间的小数
{{random:1..10}} // 产生 [1,10]之间的整数
```
> 想要了解更多的占位符，可以在`编辑界面`中先选择`x-...`语言类型，此时代码输入框左上会出现一个查看占位符的按钮，后续...

- 使用变量来传递结果
```js
// 占位符不会复用已解析的结果，故下面两行解析后的结果不会相同
{{random}}
{{random}}
// 但我们可以使用变量来传递结果
{{result::random}}  // 将 随机值赋值给 变量result，这里使用::符号（双冒号）
{{@result}}  // 后续通过@符号来引用变量result
```
> 故由上得知，占位符的完整语法为：
> - `[variable::]command[:param]`
> - `@variable`
> 
> 上面的`[...]`表示可选

- 自定义新的占位符
> 如果内置的占位符不满足你的需求，可以在`设置>标签与占位符`创建新的占位符

这里不再介绍具体细节，给出占位符函数实现的模版
```js
/**
 * 占位符解析
 * @param {string} command 响应的占位符
 * @param {string} [param] 可选参数
 */
function func(command, param){
    // ...
}
```

<br/>

## 3.其他更新日志✨
- v2.4.1
  - refactor: 【变量与表达式解析】重构为【占位符解析】
  - refactor：重构 数据导入导出文件 为zip形式
- v2.4.0
  - feat：支持代码片段名高亮搜索显示
  - feat：支持将代码片段名注册为uTools关键字
  - feat：简化主题选择，移除自定义取色
  - feat：移除自动备份选项
  - fix：修复vim按钮z-index问题
  - fix：修复搜索匹配问题

<br/>

## 4.最后

本人在前端方面只是一个小白，所以开发的插件可能会出现一些未知问题，若你遇到了，欢迎评论区反馈

> 插件所用技术概述：
>
> - uTools插件构建：[vite-plugin-utools-helper](https://github.com/csj8520/vite-plugin-utools-helper)
> - UI组件库：[Naive UI](https://www.naiveui.com/zh-CN/light)
> - 语言高亮：[highlight.js](https://highlightjs.org/)
> - Markdown渲染：[v-md-editor](http://ckang1229.gitee.io/vue-markdown-editor/zh/quick-start.html)
> - 唯一ID生成：[Nano ID](https://github.com/ai/nanoid)

